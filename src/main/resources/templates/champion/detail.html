<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <!-- 파비콘 -->
    <link rel="icon" type="image/png" href="/static/images/ff15-favicon.svg">

    <title th:text="${champ.name} + ' - 상세'">챔피언 상세</title>
    <link rel="stylesheet" href="/static/css/champion-detail.css"/>

    <!-- Ribbon Menu -->
    <link rel="stylesheet" href="/static/css/ribbon.css">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<section class="container">

    <!-- 헤더 -->
    <div th:replace="champion/fragments/champion-summary :: summary(${iconUrl}, ${champ}, ${v}, ${passiveIcon}, ${spells})"></div>

    <!-- 탭 -->
    <div class="tabs">
        <div class="tab-headers">
            <button data-tab="base" class="active">기본 정보</button>
            <button data-tab="build">빌드</button>
            <button data-tab="skins">스킨</button>
        </div>

        <div class="tab-body">
            <!-- 기본정보 -->
            <div th:replace="~{champion/fragments/champion-base :: base(${champ}, ${roleIcons})}"></div>

            <!-- 빌드 -->
            <div th:replace="~{champion/fragments/champion-build :: build}"></div>

            <!-- 스킨 -->
            <div th:replace="~{champion/fragments/champion-skins :: skins(${skins})}"></div>

        </div>
    </div>
</section>

<!-- 오버레이 -->
<div class="overlay" id="overlay">
    <span class="close-btn" id="closeOverlay">&times;</span>
    <img src="" alt="Skin Preview" id="overlayImg"/>
</div>

<script>
    // 탭 스위치 (바닐라)
    const btns=[...document.querySelectorAll('.tab-headers button')];
    const panels={
        base: document.getElementById('tab-base'),
        build: document.getElementById('tab-build'),
        skins: document.getElementById('tab-skins'),
    };
    btns.forEach(b=>b.addEventListener('click', ()=>{
        btns.forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
        Object.values(panels).forEach(p=>p.classList.remove('active'));
        panels[b.dataset.tab].classList.add('active');
    }));

    const overlay = document.getElementById('overlay');
    const overlayImg = document.getElementById('overlayImg');
    const closeOverlay = document.getElementById('closeOverlay');
    const skinImgs = document.querySelectorAll('.skin img');

    // 이미지 클릭 → 오버레이 열기
    skinImgs.forEach(img => {
        img.addEventListener('click', () => {
            overlay.classList.add('active');
            overlayImg.src = img.src;
            overlayImg.alt = img.alt;
        });
    });

    // 닫기 버튼 → 오버레이 닫기
    closeOverlay.addEventListener('click', () => {
        overlay.classList.remove('active');
    });

    // 배경 클릭 → 오버레이 닫기
    overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
            overlay.classList.remove('active');
        }
    });


    // 포지션 버튼 클릭
    const container = document.getElementById("build-position");
    container.addEventListener("click", e => {
        const btn = e.target.closest(".position-btn");
        if (!btn) return; // 버튼이 아닌 곳 클릭 시 무시
        console.log(`${btn.dataset.pos} 버튼 클릭됨`);
    });
</script>


</body>
</html>
